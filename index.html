<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Valentine Invitation üíó</title>

<link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
<script>
(function() {
  emailjs.init("dcVn_9a8Q0kZW-4pM"); 
})();
</script>
<style>
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:'Fredoka',sans-serif;
}

body{
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  background:#fff0f5; 
  overflow:hidden;
}

/* CARD */
.card{
  width:100%;
  max-width:420px;
  padding:40px 30px;
  text-align:center;
  display:none;
  animation:fadeIn 0.6s ease;
}

@keyframes fadeIn{
  from{opacity:0; transform:translateY(10px);}
  to{opacity:1; transform:translateY(0);}
}

.title{
  font-size:22px;
  font-weight:700;
  color:#ad1457;
  margin-bottom:20px;
}

.subtitle{
  font-size:16px;
  color:#880e4f;
  margin-bottom:20px;
}

/* BUTTONS */
.btn{
  padding:12px 28px;
  border-radius:30px;
  border:none;
  background:#f06292;
  color:white;
  font-weight:600;
  cursor:pointer;
  transition:0.3s;
  box-shadow:0 6px 15px rgba(240,98,146,0.4);
}

.btn:hover{
  transform:translateY(-3px) scale(1.05);
  box-shadow:0 10px 20px rgba(240,98,146,0.5);
}

.btn:active{
  transform:scale(0.95);
}

/* PASSWORD */
#passwordSection{
  position:fixed;
  inset:0;
  background:#fff0f5;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
}

.pass-title{
  color:#ad1457;
  font-size: 18px;
  font-weight: 600;
  margin-bottom: 20px;
  text-align: center;
}

.pass-dots{
  display:flex;
  gap:12px;
  margin-bottom:20px;
}

.dot{
  width:14px;
  height:14px;
  border-radius:50%;
  border:2px solid #f06292;
}

.dot.filled{
  background:#f06292;
}

.keypad{
  display:grid;
  grid-template-columns:repeat(3,70px);
  gap:12px;
}

.key{
  background:#fff;
  border-radius:15px;
  padding:15px;
  font-weight:bold;
  color:#ad1457;
  cursor:pointer;
  box-shadow:0 4px 10px rgba(0,0,0,0.05);
}

.key:active{
  transform:scale(0.9);
}

.clue{
  margin-top:20px;
  font-size:13px;
  color:#880e4f;
  opacity:0.8;
}

.pass-img {
  width: 120px;
  margin-bottom: 20px;
}

/* MUSIC BUTTON */
.music-btn{
  position:fixed;
  top:20px;
  right:20px;
  width:45px;
  height:45px;
  border-radius:50%;
  border:2px solid #f06292;
  background:white;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  z-index:999;
}

/* VIDEO */
video{
  width:100%;
  border-radius:12px;
  margin-bottom:15px;
}

/* LETTER */
#typedText{
  text-align:left;
  font-size:14px;
  line-height:1.8;
  color:#880e4f;
  white-space:pre-wrap;
  max-height:220px;
  overflow-y:auto;
  padding-left:15px;
  border-left:4px solid #f06292;
}

.cursor{
  display:inline-block;
  width:2px;
  background:#880e4f;
  animation:blink 1s infinite;
}

@keyframes blink{
  50%{opacity:0;}
}

/* CONFETTI */
.confetti{
  position:fixed;
  top:-20px;
  font-size:20px;
  animation:fall linear forwards;
  pointer-events:none;
  z-index:9999;
}

@keyframes fall{
  to{
    transform:translateY(100vh) rotate(360deg);
  }
}

.yes-btn {
  background:#f06292;
}

.no-btn {
  background:#888;
}

.no-btn:hover {
  background:#666;
}

/* BLUR EFFECT */
.blur {
  filter: blur(6px);
  pointer-events: none;
  user-select: none;
}

/* POPUP MODAL */
#datePopup {
  position: fixed;
  inset: 0;
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 10000;
}

.popup-box {
  background: white;
  padding: 30px;
  border-radius: 20px;
  max-width: 320px;
  text-align: center;
  box-shadow: 0 15px 40px rgba(0,0,0,0.2);
  animation: fadeIn 0.3s ease;
}

.popup-box h3 {
  color: #ad1457;
  margin-bottom: 15px;
}

.popup-box p {
  color: #880e4f;
  font-size: 14px;
  line-height: 1.6;
}

.close-btn {
  position: absolute;
  top: 15px;
  right: 20px;
  font-size: 20px;
  cursor: pointer;
  color: #ad1457;
}

</style>
</head>

<body>

<button class="music-btn" onclick="toggleMusic()">üéµ</button>
<audio id="bgMusic" loop>
  <source src="prettyeyes.mp3" type="audio/mpeg">
</audio>

<!-- PASSWORD -->
<div id="passwordSection">
  <img src="capoo1.gif" alt="lock" class="pass-img" />
  <div class="pass-title">enter passcode to continue üíó</div>

  <div class="pass-dots" id="dots">
    <div class="dot"></div><div class="dot"></div><div class="dot"></div>
    <div class="dot"></div><div class="dot"></div><div class="dot"></div>
  </div>

  <div class="keypad">
    <div class="key" onclick="add(1)">1</div>
    <div class="key" onclick="add(2)">2</div>
    <div class="key" onclick="add(3)">3</div>
    <div class="key" onclick="add(4)">4</div>
    <div class="key" onclick="add(5)">5</div>
    <div class="key" onclick="add(6)">6</div>
    <div class="key" onclick="add(7)">7</div>
    <div class="key" onclick="add(8)">8</div>
    <div class="key" onclick="add(9)">9</div>
    <div></div>
    <div class="key" onclick="add(0)">0</div>
    <div class="key" onclick="del()">‚å´</div>
  </div>

  <div class="clue">clue: first photobooth date üì∏</div>
</div>

<!-- WELCOME -->
<div class="card" id="welcome">
<img
    src="capoo2.gif"
    id="welcomeGif"
    alt="welcome"
    style="width: 180px; display: block; margin: 0 auto 20px"
/>   
  <div class="title">hi baby üíó</div>
  <button class="btn" onclick="show('ready')">tap hereee</button>
</div>

<!-- READY -->
<div class="card" id="ready">
<img
    src="capoo3.gif"
    id="welcomeGif"
    alt="welcome"
    style="width: 180px; display: block; margin: 0 auto 20px"
/>  
  <div class="title">are you ready to open this ba? üëÄ</div>
  <button class="btn" onclick="show('valentine')">yesss</button>
</div>

<!-- VALENTINE -->
<div class="card" id="valentine">
<img
    src="capoo4.gif"
    id="welcomeGif"
    alt="welcome"
    style="width: 180px; display: block; margin: 0 auto 20px"
/>  
  <div class="title">it's almost Valentine's Day üíå</div>
  <div class="subtitle">I have something for you... I hope im not late huhu</div>
  <button class="btn" onclick="show('videoPage')">open it</button>
</div>

<!-- VIDEO -->
<div class="card" id="videoPage">
  <video controls>
    <source src="daisy.mp4" type="video/mp4">
  </video>
  <div class="subtitle">A short collection of our memories</div>
  <button class="btn" onclick="showLetter()">letter</button>
</div>

<!-- LETTER -->
<div class="card" id="letterPage">
  <div class="title">For my Macmac üíó</div>
  <div id="typedText"></div>
  <button class="btn" onclick="showFinalPage()" id="nextBtn" style="display:none;margin-top:15px;">next</button>
</div>

<!-- FINAL -->
<div class="card" id="finalPage">

  <div id="finalTypeText" class="title"></div>

  <img id="finalImage"
       src="capoo5.gif"
       alt="valentine"
       style="width:180px; display:none; margin:20px auto;" />

  <div id="finalButtons"
       style="margin-top:20px; display:none; gap:15px; justify-content:center;">

    <button class="btn yes-btn" id="yesBtn" onclick="handleYes()">YES üíû</button>
    <button class="btn no-btn" id="noBtn" onclick="handleNo()">NO üò¢</button>

  </div>

  <div id="afterYesMessage" style="margin-top:20px;"></div>

</div>
<!-- LUNCH DATE POPUP -->
<div id="lunchPopup" style="
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.4);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:99999;
">

  <div style="
    background:white;
    width:90%;
    max-width:350px;
    padding:25px;
    border-radius:20px;
    text-align:center;
    position:relative;
    animation:fadeIn 0.4s ease;
  ">

    <!-- CLOSE BUTTON -->
    <div onclick="closePopup()" 
         style="
         position:absolute;
         top:10px;
         right:15px;
         cursor:pointer;
         font-weight:bold;
         color:#ad1457;
         font-size:18px;">
      ‚úï
    </div>

    <h3 style="color:#ad1457; margin-bottom:15px;">
      lunch date proposal üíó
    </h3>

    <p style="color:#880e4f; font-size:14px; margin-bottom:20px;">
      let‚Äôs have a lunch date together ü•∞  
      wear something comfortable okay?  
      i‚Äôll handle the rest üíó
    </p>

    <button class="btn yes-btn" onclick="closePopup()">
      YES, I WILL üíû
    </button>

  </div>
</div>


<script>
let input="";
const correct="112125";

function add(num){
  if(input.length<6){
    input+=num;
    updateDots();
    if(input.length===6) check();
  }
}
function del(){
  input=input.slice(0,-1);
  updateDots();
}
function updateDots(){
  const dots=document.querySelectorAll('.dot');
  dots.forEach((d,i)=>d.classList.toggle('filled',i<input.length));
}
function check(){
  if(input===correct){
    document.getElementById('passwordSection').style.display="none";
    
    // AUTO PLAY MUSIC
    const music = document.getElementById("bgMusic");
    music.play().catch(() => {});

    show('welcome');
  }else{
    input="";
    updateDots();
    alert("wrong password üòù");
  }
}
function show(id){
  document.querySelectorAll('.card').forEach(c=>c.style.display="none");
  document.getElementById(id).style.display="block";
}

function showLetter(){
  show('letterPage');
  typeWriter();
}

function typeWriter(){
  const text=`To My Dearest Mac.

So yessss, im gonna grab this chance to say how I feel about you.
I hope you know how much I like you.
More than I probably show sometimes.
More than my words can fully explain.
You mean so so much to me.
And I‚Äôm really grateful to have you in my life. 

We might have our tampuhan sometimes.
We don‚Äôt always get everything right.
But you never invalidate what I feel.
You never brush me off or make me feel small.
Instead, you try to understand me.
You really listen.
You reflect.
You take accountability when you need to.
And that means more to me than you probably realize.

You‚Äôre not selfish.
You think about us, not just yourself.
You make decisions with ‚Äúwe‚Äù in mind.
You‚Äôve never made me question if I‚Äôm loved.
And honestly, that says so much about the kind of person you are.

I know I may argue with you sometimes.
I know I can get tampo or quiet when I‚Äôm overwhelmed.
But thank you for being patient with me.
Thank you for understanding me even when I struggle to understand myself.
Thank you for always finding a way for us to be okay.
Thank you for the constant reassurance.
Thank you for loving me gently even on my difficult days, or for having an attitude again.

My love for you is in the small things.
In the way I remember what makes you smile.
In the way I listen to your stories.
In the way I picture myself beside you while you chase everything you deserve.
Even in my silence, please know that my heart is choosing you.

You may not always see how deep it goes.
But it‚Äôs there.
Steady.
Certain.
Growing more and more every day...

If you could see yourself the way I do,
you‚Äôd never question how truly special you are.

I love you more than you think.
And I will keep choosing you.
Always.
In all ways. 

Happy Valentine's Day, Baby üíó`
;

  const el=document.getElementById("typedText");
  let i=0;
  const cursor=document.createElement("span");
  cursor.className="cursor";
  el.appendChild(cursor);

  function type(){
    if(i<text.length){
      cursor.insertAdjacentText("beforebegin",text.charAt(i));
      i++;
      el.scrollTop=el.scrollHeight;
      setTimeout(type,30);
    }else{
      document.getElementById("nextBtn").style.display="inline-block";
    }
  }
  type();
}

/* CONFETTI */
function startConfetti(){
  const symbols=["üíó","üåº"];
  setInterval(()=>{
    const conf=document.createElement("div");
    conf.className="confetti";
    conf.innerText=symbols[Math.floor(Math.random()*symbols.length)];
    conf.style.left=Math.random()*100+"vw";
    conf.style.animationDuration=(Math.random()*3+2)+"s";
    document.body.appendChild(conf);
    setTimeout(()=>conf.remove(),5000);
  },200);
}

/* FINAL PAGE CONTROL */
let finalStarted = false;
let yesClicked = false;

/* SHOW FINAL PAGE */
function showFinalPage(){
  show('finalPage');

  if(!finalStarted){
    finalStarted = true;
    typeFinalQuestion();
  }
}

/* TYPEWRITER QUESTION */
function typeFinalQuestion(){
  const text = "Will you be my  Valentine? üíó";
  const el = document.getElementById("finalTypeText");

  let i = 0;

  function type(){
    if(i < text.length){
      el.innerHTML += text.charAt(i);
      i++;
      setTimeout(type, 80);
    } else {
      document.getElementById("finalImage").style.display = "block";
      document.getElementById("finalButtons").style.display = "flex";
    }
  }

  type();
}


/* NO BUTTON LOGIC */
let noClickCount = 0;

function handleNo(){
  const noBtn = document.getElementById("noBtn");
  noClickCount++;

  const messages = [
    "seriously, no?",
    "are you sure?",
    "100% no?",
    "ako nani oh ü•∫",
    "sure jud kang no?",
    "huna hunaa please!",
    "No No najud?",
    "a big NO?",
    "please nani oh",
    "whatever!",
    "last baa, sure NO?",
    "che",
  ];

  if(noClickCount <= messages.length){
    noBtn.textContent = messages[noClickCount - 1];
  } else {
    noBtn.textContent = "YES üíû";
    noBtn.classList.remove("no-btn");
    noBtn.classList.add("yes-btn");
    noBtn.onclick = handleYes;
  }
}


/* YES BUTTON LOGIC */
function handleYes(){

  if(yesClicked) return; 
  yesClicked = true;

  const templateParams = {
    to_email: "ryoukintekai21@gmail.com",
    message: "She said YES to being your Valentine! üíó"
  };

  emailjs.send("service_re1w5pb", "template_sawtvgh", templateParams)
    .then(function(response) {
      console.log("Email sent!", response);
    }, function(error) {
      console.log("Email failed...", error);
    });

  startConfetti();
  typeYesMessage();

  // SHOW LUNCH POPUP
  setTimeout(() => {
    document.getElementById("lunchPopup").style.display = "flex";
  }, 1200);
}


/* AFTER YES MESSAGE TYPEWRITER */
function typeYesMessage(){
  const el = document.getElementById("afterYesMessage");
  const text = "üíóüíóüíó";

  let i = 0;

  function type(){
    if(i < text.length){
      el.innerHTML += text.charAt(i);
      i++;
      setTimeout(type, 50);
    }
  }

  type();
} 

function toggleMusic(){
  const music=document.getElementById("bgMusic");
  music.paused?music.play():music.pause();
}

function closePopup(){
  document.getElementById("lunchPopup").style.display = "none";
}

</script>

</body>
</html>